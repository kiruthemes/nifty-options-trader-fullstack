# --- Runtime ---
NODE_ENV=development
DATABASE_URL="file:./dev.db"
PORT=4000
ALLOW_ORIGIN=http://localhost:5173

JWT_SECRET=iiuuhhyyggsskkiiuueerrbbhhssk
# Required for encryption at rest (exactly 32 bytes)
VAULT_KEY=wGknxH5GD9qe0DGyZpqtKv/Zs5rE5sKo1dMZhbpQW+8=
# Dev defaults to simulate; set to false in prod AFTER you complete adapters
BROKER_SIMULATE=false
# Market data source: synthetic | dhan | kite
DATA_SOURCE=dhan

# Execution default if no linked brokers
BROKER_EXEC=dhan  # none | dhan | kite

# --- Dhan (Data API + Trading) ---
DHAN_BASE_URL=https://api.dhan.co
DHAN_CLIENT_ID=1104824234
DHAN_ACCESS_TOKEN=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkaGFuIiwicGFydG5lcklkIjoiIiwiZXhwIjoxNzU1ODczOTU5LCJ0b2tlbkNvbnN1bWVyVHlwZSI6IlNFTEYiLCJ3ZWJob29rVXJsIjoiIiwiZGhhbkNsaWVudElkIjoiMTEwNDgyNDIzNCJ9._bLKDZgh3SYF6xV9DU31zXlgK0ZZot7Igdxzy_LD3XmMxXHIoDHB48JplX2bgn4cCWcEr87n27W6yh81gj-H4w
DHAN_NIFTY_SID=26000
DHAN_BANKNIFTY_SID=
DEBUG_DATAFEED=1
DHAN_WS_ENABLE=1
DHAN_INSTRUMENTS_CSV=data/dhan_instruments.csv
DEBUG_DHAN=0
DEBUG_DHAN_WS=1   # optional verbose logs while testing
# Datafeed (REST cadence + store)
OC_IV_MS=180000          # 3 min refresh for LTP/IV
OC_OI_MS=300000          # 5 min refresh for OI
OC_BACKOFF_MS=60000      # 1 min pause after HTTP 429
OC_CLOSED_POLL=900000    # 15 min idle wake while market closed
OC_STORE_DIR=server/.cache/optionchain
OC_SNAPSHOT_HHMM_IST=15:20
OC_SNAPSHOT_THROTTLE_MS=1500
OC_SNAPSHOT_MAX=0         # 0=all expiries from Dhan, or set a cap like 18

# --- Zerodha (Kite) ---
KITE_BASE_URL=https://api.kite.trade
KITE_API_KEY=your_kite_api_key_here
KITE_ACCESS_TOKEN=your_kite_access_token_here